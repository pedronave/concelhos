import { derived, readable, writable } from 'svelte/store';

export const concelhos = [{"id":"9411208450","distrito":"Guarda","concelho":"Figueira de Castelo Rodrigo","x":-6.959406105284363,"y":40.884458381487015},{"id":"9264922556","distrito":"Leiria","concelho":"Figueiró dos Vinhos","x":-8.282070402194877,"y":39.92521341389309},{"id":"565780574","distrito":"Vila Real","concelho":"Valpaços","x":-7.341254502636813,"y":41.61183191658115},{"id":"9604615426","distrito":"Azores","concelho":"Lagoa","x":-25.536283217351155,"y":37.74491601597177},{"id":"13454233130","distrito":"Porto","concelho":"Amarante","x":-8.042114882453701,"y":41.27252831760475},{"id":"10576741748","distrito":"Leiria","concelho":"Caldas da Rainha","x":-9.086238486159365,"y":39.40747555816063},{"id":"16087233421","distrito":"Bragança","concelho":"Alfândega da Fé","x":-6.951093819104827,"y":41.349830674495735},{"id":"18435357367","distrito":"Azores","concelho":"Velas","x":-28.151611873851596,"y":38.68334755131666},{"id":"4230155484","distrito":"Viseu","concelho":"Armamar","x":-7.677557894776458,"y":41.09490401601545},{"id":"11980982413","distrito":"Santarém","concelho":"Chamusca","x":-8.380360213446417,"y":39.2716332847648},{"id":"6022661599","distrito":"Braga","concelho":"Póvoa de Lanhoso","x":-8.25359221943607,"y":41.58811228763158},{"id":"20218417028","distrito":"Beja","concelho":"Castro Verde","x":-8.028287512545512,"y":37.704705979088516},{"id":"11644140535","distrito":"Beja","concelho":"Mértola","x":-7.7065808091209105,"y":37.64679818669228},{"id":"8024046364","distrito":"Viana do Castelo","concelho":"Arcos de Valdevez","x":-8.364494775892666,"y":41.9028646284494},{"id":"22140443231","distrito":"Porto","concelho":"Vila do Conde","x":-8.682603187471813,"y":41.338192949219945},{"id":"8555886526","distrito":"Braga","concelho":"Amares","x":-8.345282731121928,"y":41.651685662810245},{"id":"166903364","distrito":"Coimbra","concelho":"Pampilhosa da Serra","x":-7.916366383412483,"y":40.08431081785521},{"id":"15516038759","distrito":"Santarém","concelho":"Salvaterra de Magos","x":-8.687809684336091,"y":39.04672800696163},{"id":"5789789734","distrito":"Azores","concelho":"São Roque do Pico","x":-28.31744949778967,"y":38.495466976909256},{"id":"21483369994","distrito":"Azores","concelho":"Praia da Vitória","x":-27.156456277106386,"y":38.74695921420487},{"id":"13182350229","distrito":"Guarda","concelho":"Manteigas","x":-7.52005620609002,"y":40.3911389703095},{"id":"4653458238","distrito":"Leiria","concelho":"Batalha","x":-8.765544881789182,"y":39.637058579563124},{"id":"11819191248","distrito":"Santarém","concelho":"Abrantes","x":-8.157852763303191,"y":39.426304267039114},{"id":"7003080748","distrito":"Santarém","concelho":"Torres Novas","x":-8.550819437736275,"y":39.505551533527054},{"id":"20194251407","distrito":"Santarém","concelho":"Coruche","x":-8.447531034093249,"y":38.9402188787865},{"id":"5906933854","distrito":"Santarém","concelho":"Sardoal","x":-8.138509573840343,"y":39.562973734331585},{"id":"17842960736","distrito":"Azores","concelho":"Corvo","x":-31.105222480433593,"y":39.69910479270799},{"id":"19825170335","distrito":"Vila Real","concelho":"Boticas","x":-7.733996051580755,"y":41.67594604763027},{"id":"14110302062","distrito":"Portalegre","concelho":"Alter do Chão","x":-7.7248852743390835,"y":39.21298295498743},{"id":"13692325442","distrito":"Azores","concelho":"Vila Franca do Campo","x":-25.41819608335819,"y":37.743591298396794},{"id":"4561815395","distrito":"Aveiro","concelho":"São João da Madeira","x":-8.490356635245087,"y":40.895633070118166},{"id":"17887019194","distrito":"Viana do Castelo","concelho":"Paredes de Coura","x":-8.572089645173694,"y":41.910192763812105},{"id":"5278209350","distrito":"Porto","concelho":"Maia","x":-8.601189118005859,"y":41.24498581748448},{"id":"20164201911","distrito":"Leiria","concelho":"Marinha Grande","x":-8.952579454256114,"y":39.785275368717606},{"id":"20554947134","distrito":"Aveiro","concelho":"Ílhavo","x":-8.699471377016742,"y":40.60530024264401},{"id":"13340870111","distrito":"Azores","concelho":"Vila do Porto","x":-25.09982278548701,"y":36.97133391923764},{"id":"9445971568","distrito":"Viseu","concelho":"Penalva do Castelo","x":-7.6558740034947,"y":40.67130189250414},{"id":"5317790981","distrito":"Santarém","concelho":"Cartaxo","x":-8.78962606915197,"y":39.14579408605885},{"id":"1238453887","distrito":"Castelo Branco","concelho":"Sertã","x":-8.099176004020373,"y":39.82443469598863},{"id":"4251219041","distrito":"Santarém","concelho":"Vila Nova da Barquinha","x":-8.400388444236812,"y":39.48165751615261},{"id":"2524110907","distrito":"Viana do Castelo","concelho":"Viana do Castelo","x":-8.759190465596344,"y":41.71704022248619},{"id":"2922876097","distrito":"Porto","concelho":"Valongo","x":-8.494178687703082,"y":41.206693086265},{"id":"14485682610","distrito":"Porto","concelho":"Vila Nova de Gaia","x":-8.580691942555339,"y":41.07446603383334},{"id":"9922884785","distrito":"Porto","concelho":"Paredes","x":-8.396118082655727,"y":41.18151911095564},{"id":"16685369451","distrito":"Coimbra","concelho":"Montemor-o-Velho","x":-8.658455427843629,"y":40.21469071639192},{"id":"13464143977","distrito":"Portalegre","concelho":"Monforte","x":-7.435395969942687,"y":39.04789676548101},{"id":"15879689364","distrito":"Viseu","concelho":"Castro Daire","x":-7.9329066014841265,"y":40.91289279762113},{"id":"17986010910","distrito":"Santarém","concelho":"Ferreira do Zêzere","x":-8.31688130128479,"y":39.72135648516921},{"id":"6367393006","distrito":"Viseu","concelho":"Sátão","x":-7.673962940734304,"y":40.770294526678},{"id":"1100094177","distrito":"Porto","concelho":"Baião","x":-7.989242542511916,"y":41.15756383191007},{"id":"13096996683","distrito":"Azores","concelho":"Povoação","x":-25.26063746297618,"y":37.765010299055675},{"id":"16890460886","distrito":"Setúbal","concelho":"Montijo","x":-8.689344965743324,"y":38.73036078256093},{"id":"7714267973","distrito":"Portalegre","concelho":"Avis","x":-7.912856386429349,"y":39.069686794679335},{"id":"6865654403","distrito":"Vila Real","concelho":"Ribeira de Pena","x":-7.796941789119926,"y":41.508885430717164},{"id":"17195609148","distrito":"Vila Real","concelho":"Mesão Frio","x":-7.870990856074878,"y":41.16392727234958},{"id":"18899730775","distrito":"Santarém","concelho":"Golegã","x":-8.505643828319691,"y":39.38683784771468},{"id":"17147852087","distrito":"Portalegre","concelho":"Gavião","x":-7.8950269864800555,"y":39.43882863218017},{"id":"20504365875","distrito":"Guarda","concelho":"Pinhel","x":-7.110133400256358,"y":40.74194955242401},{"id":"9628042690","distrito":"Viseu","concelho":"Tarouca","x":-7.762085054091906,"y":41.013928582911184},{"id":"6175983191","distrito":"Viseu","concelho":"Cinfães","x":-8.102565090301853,"y":41.0352374814714},{"id":"3476335095","distrito":"Braga","concelho":"Braga","x":-8.315984935323232,"y":41.46307880124901},{"id":"2649281772","distrito":"Guarda","concelho":"Guarda","x":-7.245046789411729,"y":40.51951304220195},{"id":"8757134869","distrito":"Viseu","concelho":"Mortágua","x":-8.253147037979005,"y":40.41951900634},{"id":"16186314351","distrito":"Setúbal","concelho":"Moita","x":-8.997611108066986,"y":38.647576868360474},{"id":"9800097319","distrito":"Castelo Branco","concelho":"Vila Velha de Ródão","x":-7.6637739350457865,"y":39.68092749537672},{"id":"7258578688","distrito":"Lisboa","concelho":"Alenquer","x":-9.039068415946133,"y":39.098159888878264},{"id":"21342041789","distrito":"Castelo Branco","concelho":"Idanha-a-Nova","x":-7.11304390705313,"y":39.900278376635484},{"id":"19165854190","distrito":"Guarda","concelho":"Fornos de Algodres","x":-7.500091150577623,"y":40.651038077862},{"id":"9361048349","distrito":"Viana do Castelo","concelho":"Ponte da Barca","x":-8.309827605760788,"y":41.80673449734198},{"id":"15069315273","distrito":"Faro","concelho":"Alcoutim","x":-7.640906520568005,"y":37.44199494217679},{"id":"21876180903","distrito":"Santarém","concelho":"Almeirim","x":-8.580003776819607,"y":39.15892910822087},{"id":"17350131970","distrito":"Faro","concelho":"Vila Real de Santo António","x":-7.519714038166207,"y":37.19616559798397},{"id":"14199513033","distrito":"Viseu","concelho":"Nelas","x":-7.865201761169704,"y":40.526870373033574},{"id":"7638109540","distrito":"Santarém","concelho":"Santarém","x":-8.726941738236649,"y":39.33695724286726},{"id":"1942511724","distrito":"Setúbal","concelho":"Barreiro","x":-9.042714189046743,"y":38.625084097051634},{"id":"19932208238","distrito":"Castelo Branco","concelho":"Belmonte","x":-7.329670959966405,"y":40.33076676866107},{"id":"20002734105","distrito":"Porto","concelho":"Porto","x":-8.62080098832318,"y":41.16174604931672},{"id":"15482518357","distrito":"Braga","concelho":"Vieira do Minho","x":-8.104685096975166,"y":41.63117713500348},{"id":"15468165873","distrito":"Lisboa","concelho":"Torres Vedras","x":-9.26043935122674,"y":39.10488801974535},{"id":"3079637760","distrito":"Madeira","concelho":"Ponta do Sol","x":-17.09403655374416,"y":32.722629927448445},{"id":"21449460717","distrito":"Guarda","concelho":"Almeida","x":-6.913991632414418,"y":40.6229579376426},{"id":"4218080869","distrito":"Braga","concelho":"Vizela","x":-8.29560049325353,"y":41.37332340352463},{"id":"9353652789","distrito":"Vila Real","concelho":"Alijó","x":-7.485987590208065,"y":41.30380796022863},{"id":"2053693112","distrito":"Évora","concelho":"Alandroal","x":-7.382903542244739,"y":38.615770249232106},{"id":"17950176700","distrito":"Bragança","concelho":"Carrazeda de Ansiães","x":-7.308015813373539,"y":41.228020281063195},{"id":"14649519178","distrito":"Setúbal","concelho":"Sesimbra","x":-9.119812946798026,"y":38.49462059805165},{"id":"1035537918","distrito":"Vila Real","concelho":"Montalegre","x":-7.851345794294161,"y":41.77558590285162},{"id":"17531184576","distrito":"Madeira","concelho":"Funchal","x":-16.91065788092426,"y":32.65495489157306},{"id":"1584652138","distrito":"Castelo Branco","concelho":"Penamacor","x":-7.1367924281482695,"y":40.17653235203613},{"id":"6260293771","distrito":"Évora","concelho":"Montemor-o-Novo","x":-8.2961490624618,"y":38.648570858925865},{"id":"8446740320","distrito":"Bragança","concelho":"Mirandela","x":-7.187651148042901,"y":41.50845678736651},{"id":"8473157572","distrito":"Leiria","concelho":"Castanheira de Pêra","x":-8.195807362925445,"y":40.01994736795396},{"id":"8828514322","distrito":"Beja","concelho":"Ferreira do Alentejo","x":-8.188861524754792,"y":38.08824702935317},{"id":"7001547296","distrito":"Leiria","concelho":"Nazaré","x":-9.044404467540035,"y":39.59469389882675},{"id":"13465428983","distrito":"Faro","concelho":"Olhão","x":-7.8102748505717345,"y":37.06414597522743},{"id":"13344244594","distrito":"Vila Real","concelho":"Vila Pouca de Aguiar","x":-7.623247536090352,"y":41.51099535652052},{"id":"16343971671","distrito":"Viana do Castelo","concelho":"Melgaço","x":-8.21328757452835,"y":42.049631314038876},{"id":"14008578304","distrito":"Porto","concelho":"Santo Tirso","x":-8.443996989429573,"y":41.320869627519855},{"id":"1936278286","distrito":"Braga","concelho":"Esposende","x":-8.757233875642427,"y":41.54715034960867},{"id":"10385927428","distrito":"Aveiro","concelho":"Estarreja","x":-8.574894986185793,"y":40.76115019777651},{"id":"20957512661","distrito":"Santarém","concelho":"Benavente","x":-8.810663043969512,"y":38.867865635490446},{"id":"104277274","distrito":"Coimbra","concelho":"Mira","x":-8.754717605332203,"y":40.43307313723678},{"id":"7152048001","distrito":"Évora","concelho":"Viana do Alentejo","x":-8.12240853690952,"y":38.38458617923789},{"id":"16234458784","distrito":"Madeira","concelho":"Porto Santo","x":-16.343395037589374,"y":33.06704280787877},{"id":"15499133124","distrito":"Faro","concelho":"Aljezur","x":-8.800845624380111,"y":37.29722282547496},{"id":"376215518","distrito":"Vila Real","concelho":"Chaves","x":-7.437045679576206,"y":41.750201990232384},{"id":"12975568777","distrito":"Viana do Castelo","concelho":"Ponte de Lima","x":-8.587493282961093,"y":41.7574291461358},{"id":"20923488808","distrito":"Coimbra","concelho":"Arganil","x":-7.985486516876156,"y":40.229035166947995},{"id":"10995981144","distrito":"Guarda","concelho":"Celorico da Beira","x":-7.384939321055645,"y":40.6222988701564},{"id":"5068947849","distrito":"Viseu","concelho":"Vouzela","x":-8.139238802523975,"y":40.674966502808125},{"id":"5735861162","distrito":"Braga","concelho":"Fafe","x":-8.148243067386925,"y":41.477257704867135},{"id":"20658965623","distrito":"Vila Real","concelho":"Mondim de Basto","x":-7.895062774932362,"y":41.38871901720061},{"id":"9863613964","distrito":"Bragança","concelho":"Vila Flor","x":-7.15945102609119,"y":41.32168036233497},{"id":"1901590081","distrito":"Bragança","concelho":"Freixo de Espada à Cinta","x":-6.832703390626231,"y":41.11351949007536},{"id":"12401846480","distrito":"Évora","concelho":"Mourão","x":-7.274951888978825,"y":38.31821458924652},{"id":"18201975097","distrito":"Coimbra","concelho":"Penela","x":-8.369848010821496,"y":40.010123133780034},{"id":"5974448116","distrito":"Coimbra","concelho":"Oliveira do Hospital","x":-7.863719011317585,"y":40.36846075524227},{"id":"3119816899","distrito":"Leiria","concelho":"Bombarral","x":-9.157919647728802,"y":39.28409001370227},{"id":"12565134108","distrito":"Leiria","concelho":"Pedrógão Grande","x":-8.18258038236855,"y":39.934930012847495},{"id":"15572688611","distrito":"Portalegre","concelho":"Sousel","x":-7.7394552858472645,"y":38.96151971755876},{"id":"20068030896","distrito":"Leiria","concelho":"Óbidos","x":-9.188691457967716,"y":39.36249679246682},{"id":"1760770083","distrito":"Faro","concelho":"Vila do Bispo","x":-8.88343723842148,"y":37.08633006099636},{"id":"5068842872","distrito":"Porto","concelho":"Lousada","x":-8.27521677056484,"y":41.285523830120205},{"id":"9854055466","distrito":"Faro","concelho":"Silves","x":-8.345855176768413,"y":37.27033342930247},{"id":"3067858192","distrito":"Portalegre","concelho":"Campo Maior","x":-7.050478166186889,"y":39.02619016073304},{"id":"16832355642","distrito":"Braga","concelho":"Cabeceiras de Basto","x":-7.953889887653945,"y":41.540169016226976},{"id":"17710743184","distrito":"Aveiro","concelho":"Espinho","x":-8.625775859123767,"y":40.994776256124894},{"id":"20582098429","distrito":"Coimbra","concelho":"Miranda do Corvo","x":-8.327398822214446,"y":40.104858651957954},{"id":"22664036064","distrito":"Coimbra","concelho":"Penacova","x":-8.26756265706696,"y":40.29756338403119},{"id":"10046737091","distrito":"Coimbra","concelho":"Vila Nova de Poiares","x":-8.250394870146824,"y":40.21692872654524},{"id":"439474682","distrito":"Bragança","concelho":"Bragança","x":-6.735237045467882,"y":41.77090934519116},{"id":"13563359850","distrito":"Faro","concelho":"Portimão","x":-8.582827682593143,"y":37.19218660413919},{"id":"6200302171","distrito":"Guarda","concelho":"Gouveia","x":-7.580319217298405,"y":40.50137005817278},{"id":"18567708469","distrito":"Coimbra","concelho":"Lousã","x":-8.2283795789699,"y":40.13176529443387},{"id":"12054065891","distrito":"Beja","concelho":"Aljustrel","x":-8.188118935368772,"y":37.8878557522703},{"id":"5706539380","distrito":"Azores","concelho":"Calheta","x":-27.91533851603552,"y":38.5943158533318},{"id":"11104002434","distrito":"Guarda","concelho":"Vila Nova de Foz Côa","x":-7.169923631419569,"y":41.05263745133491},{"id":"10784283387","distrito":"Madeira","concelho":"Machico","x":-16.802488083743462,"y":32.740642885980485},{"id":"4069049314","distrito":"Aveiro","concelho":"Santa Maria da Feira","x":-8.510468118022281,"y":40.96689319794081},{"id":"1724630922","distrito":"Aveiro","concelho":"Oliveira do Bairro","x":-8.551515396162854,"y":40.51585362539396},{"id":"15467470073","distrito":"Lisboa","concelho":"Arruda dos Vinhos","x":-9.094202768518347,"y":38.97466539619048},{"id":"20019156607","distrito":"Vila Real","concelho":"Vila Real","x":-7.738596102059701,"y":41.31165193735467},{"id":"18189645803","distrito":"Azores","concelho":"Horta","x":-28.701332391454653,"y":38.57821749106064},{"id":"16843448761","distrito":"Évora","concelho":"Portel","x":-7.696656346108554,"y":38.30183126733024},{"id":"677481156","distrito":"Setúbal","concelho":"Palmela","x":-8.807264281488077,"y":38.61860827283158},{"id":"3300844524","distrito":"Faro","concelho":"São Brás de Alportel","x":-7.8786513718233895,"y":37.19569527928658},{"id":"3634107567","distrito":"Santarém","concelho":"Rio Maior","x":-8.90142532546373,"y":39.32892646425976},{"id":"2881923493","distrito":"Viana do Castelo","concelho":"Caminha","x":-8.790725098712938,"y":41.84771897834125},{"id":"4865836478","distrito":"Aveiro","concelho":"Sever do Vouga","x":-8.35174588759404,"y":40.72441025329198},{"id":"22927428443","distrito":"Porto","concelho":"Matosinhos","x":-8.670705370940043,"y":41.212737849081115},{"id":"3516230190","distrito":"Bragança","concelho":"Miranda do Douro","x":-6.358496193142133,"y":41.51059022461684},{"id":"1547243280","distrito":"Coimbra","concelho":"Condeixa-a-Nova","x":-8.499630536308402,"y":40.09871429846096},{"id":"18687479289","distrito":"Portalegre","concelho":"Marvão","x":-7.362800385065767,"y":39.4053126333042},{"id":"15535274133","distrito":"Azores","concelho":"Santa Cruz das Flores","x":-31.191544444077845,"y":39.47068057800904},{"id":"18553341815","distrito":"Setúbal","concelho":"Seixal","x":-9.10957152844138,"y":38.60199151140364},{"id":"9067565194","distrito":"Beja","concelho":"Barrancos","x":-7.05221048229479,"y":38.14819097083},{"id":"16340226415","distrito":"Portalegre","concelho":"Elvas","x":-7.228881570438516,"y":38.910482218225916},{"id":"1638340766","distrito":"Guarda","concelho":"Seia","x":-7.719160179077013,"y":40.37776186536681},{"id":"20453632442","distrito":"Leiria","concelho":"Ansião","x":-8.43871063225717,"y":39.93415615385218},{"id":"22167932223","distrito":"Viseu","concelho":"Penedono","x":-7.395072307952006,"y":40.99123102568742},{"id":"13410969415","distrito":"Viseu","concelho":"Tabuaço","x":-7.565545899530763,"y":41.094269950845636},{"id":"4524638988","distrito":"Lisboa","concelho":"Loures","x":-9.154470061327055,"y":38.861628531761454},{"id":"10157580494","distrito":"Azores","concelho":"Ponta Delgada","x":-25.729128059148167,"y":37.81843910947904},{"id":"6962225023","distrito":"Braga","concelho":"Celorico de Basto","x":-8.039611609214992,"y":41.401309667109366},{"id":"17980827060","distrito":"Leiria","concelho":"Leiria","x":-8.802196099438806,"y":39.78931070056447},{"id":"6748713191","distrito":"Beja","concelho":"Moura","x":-7.28745419285645,"y":38.133431467132745},{"id":"411342493","distrito":"Braga","concelho":"Terras de Bouro","x":-8.191164637254392,"y":41.73907753986146},{"id":"6515619659","distrito":"Faro","concelho":"Lagos","x":-8.728458677385701,"y":37.15200362645816},{"id":"2159306146","distrito":"Castelo Branco","concelho":"Oleiros","x":-7.871115312761165,"y":39.944578221859345},{"id":"6745070954","distrito":"Lisboa","concelho":"Sintra","x":-9.357642553588583,"y":38.82303775284578},{"id":"17558948937","distrito":"Porto","concelho":"Paços de Ferreira","x":-8.379994088583171,"y":41.28851721776153},{"id":"8857569156","distrito":"Viseu","concelho":"Carregal do Sal","x":-7.988009645569905,"y":40.449778927148984},{"id":"3150220950","distrito":"Viseu","concelho":"Tondela","x":-8.122699419838693,"y":40.5433565003843},{"id":"2728458086","distrito":"Porto","concelho":"Marco de Canaveses","x":-8.158296344980599,"y":41.15557992897234},{"id":"20362696598","distrito":"Setúbal","concelho":"Almada","x":-9.193024952284773,"y":38.63561058457466},{"id":"2260794616","distrito":"Portalegre","concelho":"Ponte de Sôr","x":-8.082408692979504,"y":39.18792742026484},{"id":"16754340506","distrito":"Beja","concelho":"Serpa","x":-7.489650051876202,"y":37.93294762583814},{"id":"10542826621","distrito":"Évora","concelho":"Arraiolos","x":-7.916383299756958,"y":38.786750434531264},{"id":"17142255779","distrito":"Coimbra","concelho":"Soure","x":-8.61959298411685,"y":40.066791516617165},{"id":"13399680297","distrito":"Vila Real","concelho":"Santa Marta de Penaguião","x":-7.802286527894138,"y":41.22807088641232},{"id":"14211446597","distrito":"Viseu","concelho":"Resende","x":-7.939762478822381,"y":41.07620948173839},{"id":"12726672781","distrito":"Faro","concelho":"Alcoutim","x":-7.723724362775274,"y":37.25065877293457},{"id":"4292729018","distrito":"Beja","concelho":"Cuba","x":-7.913477783208592,"y":38.19278010984838},{"id":"21051210915","distrito":"Lisboa","concelho":"Azambuja","x":-8.896871997491731,"y":39.133668256561045},{"id":"15828443306","distrito":"Azores","concelho":"Lajes das Flores","x":-31.213578208468316,"y":39.41284115592084},{"id":"8546831615","distrito":"Portalegre","concelho":"Castelo de Vide","x":-7.493322200169898,"y":39.46454907426047},{"id":"10112453386","distrito":"Faro","concelho":"Loulé","x":-8.04678440005899,"y":37.22538098136665},{"id":"11321659877","distrito":"Santarém","concelho":"Ourém","x":-8.57425037141538,"y":39.69233964101728},{"id":"8911110036","distrito":"Azores","concelho":"Lajes do Pico","x":-28.22500032055735,"y":38.430072839231},{"id":"730743556","distrito":"Viseu","concelho":"Mangualde","x":-7.720088933694602,"y":40.59487204931982},{"id":"2111317319","distrito":"Setúbal","concelho":"Santiago do Cacém","x":-8.567996530216531,"y":37.953104216675754},{"id":"10733164397","distrito":"Madeira","concelho":"Porto Moniz","x":-17.14683021184884,"y":32.816858899958675},{"id":"5526671630","distrito":"Azores","concelho":"Ribeira Grande","x":-25.455417391438488,"y":37.80334563711118},{"id":"10751947518","distrito":"Beja","concelho":"Alvito","x":-8.041497037298678,"y":38.24407158159321},{"id":"18347395882","distrito":"Madeira","concelho":"Ribeira Brava","x":-17.03261013140927,"y":32.70882025195589},{"id":"14102327564","distrito":"Faro","concelho":"Albufeira","x":-8.232635591467952,"y":37.13378127380412},{"id":"21464479484","distrito":"Braga","concelho":"Vila Nova de Famalicão","x":-8.503327715420296,"y":41.408626726803966},{"id":"15406537446","distrito":"Lisboa","concelho":"Oeiras","x":-9.276306530374583,"y":38.71702493084989},{"id":"14904504341","distrito":"Azores","concelho":"Santa Cruz da Graciosa","x":-28.0113271960199,"y":39.052293681848255},{"id":"20554442692","distrito":"Viana do Castelo","concelho":"Monção","x":-8.426342955140136,"y":42.02724990768313},{"id":"10894801850","distrito":"Beja","concelho":"Odemira","x":-8.576850388200523,"y":37.60727030308885},{"id":"9984040055","distrito":"Faro","concelho":"Monchique","x":-8.591689424430115,"y":37.316175372634866},{"id":"22182378296","distrito":"Viseu","concelho":"Moimenta da Beira","x":-7.638565855584297,"y":40.964263801443174},{"id":"2531165721","distrito":"Porto","concelho":"Penafiel","x":-8.293801365427628,"y":41.15063286789546},{"id":"10727570610","distrito":"Beja","concelho":"Beja","x":-7.855871787301789,"y":37.96253982903244},{"id":"4836696896","distrito":"Portalegre","concelho":"Portalegre","x":-7.399577438982908,"y":39.26927648926398},{"id":"15360509357","distrito":"Santarém","concelho":"Entroncamento","x":-8.478661732037208,"y":39.464363812073955},{"id":"5305849541","distrito":"Vila Real","concelho":"Peso da Régua","x":-7.768723420812367,"y":41.183254904670896},{"id":"21598095125","distrito":"Évora","concelho":"Redondo","x":-7.598793071692655,"y":38.62560972041195},{"id":"15776183150","distrito":"Madeira","concelho":"Câmara de Lobos","x":-16.976846996910233,"y":32.70212089601407},{"id":"5825855907","distrito":"Portalegre","concelho":"Nisa","x":-7.667585318250394,"y":39.5228620612836},{"id":"8024600943","distrito":"Aveiro","concelho":"Vagos","x":-8.689548077459202,"y":40.515464056897486},{"id":"21495156492","distrito":"Setúbal","concelho":"Setúbal","x":-8.907901180716694,"y":38.520750384077246},{"id":"19808670188","distrito":"Évora","concelho":"Vila Viçosa","x":-7.353170890767226,"y":38.76888984862137},{"id":"7633786550","distrito":"Santarém","concelho":"Alpiarça","x":-8.570564344230277,"y":39.24112991164199},{"id":"16671709973","distrito":"Évora","concelho":"Vendas Novas","x":-8.514804416886001,"y":38.65500225728644},{"id":"16806030034","distrito":"Castelo Branco","concelho":"Covilhã","x":-7.562607444974444,"y":40.256709893865526},{"id":"16307274050","distrito":"Azores","concelho":"Madalena","x":-28.46371910471893,"y":38.4858813871691},{"id":"21012169561","distrito":"Évora","concelho":"Borba","x":-7.469354864742879,"y":38.816524986868956},{"id":"9411483589","distrito":"Vila Real","concelho":"Sabrosa","x":-7.598629820031299,"y":41.25234860917894},{"id":"3945684198","distrito":"Santarém","concelho":"Alcanena","x":-8.68930364505132,"y":39.47236260744331},{"id":"15132932102","distrito":"Coimbra","concelho":"Figueira da Foz","x":-8.808571438068258,"y":40.168987344819094},{"id":"17184118725","distrito":"Lisboa","concelho":"Lisboa","x":-9.157684542742988,"y":38.741649886220955},{"id":"2763163147","distrito":"Évora","concelho":"Reguengos de Monsaraz","x":-7.477427873028495,"y":38.39618078931322},{"id":"14241490071","distrito":"Setúbal","concelho":"Alcochete","x":-8.89519657961793,"y":38.72186960929845},{"id":"17019994678","distrito":"Viseu","concelho":"Sernancelhe","x":-7.507083345355336,"y":40.91001498110052},{"id":"10289612231","distrito":"Bragança","concelho":"Macedo de Cavaleiros","x":-6.906278178109327,"y":41.54335695021407},{"id":"3587097913","distrito":"Aveiro","concelho":"Oliveira de Azeméis","x":-8.468375942435326,"y":40.84222624844428},{"id":"2098287388","distrito":"Leiria","concelho":"Alcobaça","x":-8.990361145110175,"y":39.55232668958056},{"id":"1952630733","distrito":"Santarém","concelho":"Mação","x":-7.974875979151294,"y":39.605174798282796},{"id":"18061165075","distrito":"Castelo Branco","concelho":"Fundão","x":-7.48246680499413,"y":40.12144045543063},{"id":"5147464233","distrito":"Aveiro","concelho":"Águeda","x":-8.395634726043749,"y":40.58601216908536},{"id":"3729807418","distrito":"Beja","concelho":"Almodôvar","x":-8.084482955475062,"y":37.47500353378485},{"id":"480287059","distrito":"Setúbal","concelho":"Alcácer do Sal","x":-8.47032392088619,"y":38.366550976317306},{"id":"3925368205","distrito":"Lisboa","concelho":"Mafra","x":-9.308868265143387,"y":38.9611409145966},{"id":"12352942021","distrito":"Azores","concelho":"Angra do Heroísmo","x":-27.250002909926394,"y":38.70833348359817},{"id":"6699599915","distrito":"Aveiro","concelho":"Arouca","x":-8.251717060493743,"y":40.92876311573976},{"id":"4482603342","distrito":"Évora","concelho":"Mora","x":-8.088829245889524,"y":38.91889544956287},{"id":"22027196373","distrito":"Aveiro","concelho":"Anadia","x":-8.442779321784734,"y":40.45261877073298},{"id":"884474414","distrito":"Viseu","concelho":"Santa Comba Dão","x":-8.115635944245312,"y":40.40059057442007},{"id":"2031220108","distrito":"Lisboa","concelho":"Vila Franca de Xira","x":-8.98363137057191,"y":38.92956603835384},{"id":"19620543968","distrito":"Setúbal","concelho":"Sines","x":-8.777164120057037,"y":37.92446510621199},{"id":"15992371462","distrito":"Viana do Castelo","concelho":"Valença","x":-8.606326283199445,"y":41.998320213589025},{"id":"4735201416","distrito":"Guarda","concelho":"Sabugal","x":-7.032457333973367,"y":40.37327384124641},{"id":"20625841282","distrito":"Bragança","concelho":"Vimioso","x":-6.53074180298618,"y":41.570699964338836},{"id":"18709332394","distrito":"Leiria","concelho":"Porto de Mós","x":-8.81700939926765,"y":39.55791963201377},{"id":"11101312593","distrito":"Bragança","concelho":"Vinhais","x":-7.048639455428862,"y":41.83249447075197},{"id":"2329028625","distrito":"Braga","concelho":"Barcelos","x":-8.623709292546424,"y":41.53670909927224},{"id":"1011646664","distrito":"Évora","concelho":"Estremoz","x":-7.613682412971536,"y":38.8454533891319},{"id":"21383843586","distrito":"Aveiro","concelho":"Vale de Cambra","x":-8.336374735985842,"y":40.83355154084768},{"id":"2366913319","distrito":"Leiria","concelho":"Pombal","x":-8.677373822307477,"y":39.92647918871267},{"id":"16243288036","distrito":"Viana do Castelo","concelho":"Vila Nova de Cerveira","x":-8.706600625420279,"y":41.91728435707635},{"id":"20948480336","distrito":"Leiria","concelho":"Peniche","x":-9.320863095806313,"y":39.33923920296837},{"id":"2835901555","distrito":"Setúbal","concelho":"Grândola","x":-8.574194880304725,"y":38.178434988362326},{"id":"6492556873","distrito":"Coimbra","concelho":"Góis","x":-8.08943092587443,"y":40.10253776195084},{"id":"136667545","distrito":"Viseu","concelho":"Vila Nova de Paiva","x":-7.763359028059993,"y":40.872323161684214},{"id":"9593308547","distrito":"Santarém","concelho":"Tomar","x":-8.386756762342966,"y":39.60290301755099},{"id":"7154838038","distrito":"Castelo Branco","concelho":"Proença-a-Nova","x":-7.855785951303487,"y":39.73830221196076},{"id":"17672402946","distrito":"Lisboa","concelho":"Odivelas","x":-9.199266082945282,"y":38.79781945865753},{"id":"6007522793","distrito":"Aveiro","concelho":"Mealhada","x":-8.441030123326215,"y":40.3537680336783},{"id":"4644173738","distrito":"Portalegre","concelho":"Fronteira","x":-7.626660158878415,"y":39.07602307052032},{"id":"10214314429","distrito":"Porto","concelho":"Póvoa de Varzim","x":-8.717226651081313,"y":41.41914705985882},{"id":"10837704000","distrito":"Guarda","concelho":"Mêda","x":-7.252805795650496,"y":40.9366388226162},{"id":"14276219954","distrito":"Coimbra","concelho":"Tábua","x":-8.015187439838236,"y":40.33416266004028},{"id":"6239130270","distrito":"Lisboa","concelho":"Sobral de Monte Agraço","x":-9.160729538711058,"y":38.995136285825765},{"id":"6568210856","distrito":"Madeira","concelho":"Santa Cruz","x":-16.779667318721934,"y":32.65847653951186},{"id":"16233652841","distrito":"Guarda","concelho":"Trancoso","x":-7.334694424756935,"y":40.791470322257915},{"id":"12167486120","distrito":"Viseu","concelho":"Lamego","x":-7.822498304365253,"y":41.08071725012096},{"id":"21788266880","distrito":"Lisboa","concelho":"Cascais","x":-9.400998583725723,"y":38.724984429999566},{"id":"2581361248","distrito":"Faro","concelho":"Lagoa","x":-8.453284879401556,"y":37.125750302474046},{"id":"15767184617","distrito":"Madeira","concelho":"Santana","x":-16.90528839322794,"y":32.78110812274176},{"id":"17123495800","distrito":"Viseu","concelho":"Oliveira de Frades","x":-8.238370636230238,"y":40.70374176802097},{"id":"3550130355","distrito":"Castelo Branco","concelho":"Castelo Branco","x":-7.5016656147111345,"y":39.85483396997157},{"id":"2988718319","distrito":"Portalegre","concelho":"Crato","x":-7.645042248530165,"y":39.31331750813546},{"id":"22605150966","distrito":"Lisboa","concelho":"Cadaval","x":-9.067550793619864,"y":39.234905786330124},{"id":"12864219062","distrito":"Castelo Branco","concelho":"Vila de Rei","x":-8.144315227180805,"y":39.683116584176155},{"id":"9117752214","distrito":"Viseu","concelho":"São João da Pesqueira","x":-7.437989174837213,"y":41.11851762993461},{"id":"19417768131","distrito":"Braga","concelho":"Vila Verde","x":-8.443455805032608,"y":41.68076380312658},{"id":"22912088766","distrito":"Bragança","concelho":"Torre de Moncorvo","x":-7.016784062739481,"y":41.17257860821176},{"id":"4127486172","distrito":"Faro","concelho":"Castro Marim","x":-7.516883818756989,"y":37.292720639355345},{"id":"15918963983","distrito":"Porto","concelho":"Felgueiras","x":-8.201570070866206,"y":41.35060094824259},{"id":"4541028682","distrito":"Aveiro","concelho":"Castelo de Paiva","x":-8.303031727997674,"y":41.01824620316835},{"id":"14201439476","distrito":"Porto","concelho":"Gondomar","x":-8.482974134057358,"y":41.10958305518851},{"id":"11181795424","distrito":"Faro","concelho":"Faro","x":-7.919580481807671,"y":37.05997383196708},{"id":"510472418","distrito":"Santarém","concelho":"Constância","x":-8.291496474698189,"y":39.42570199044388},{"id":"10148724055","distrito":"Viseu","concelho":"Viseu","x":-7.9055815125830815,"y":40.68803243149354},{"id":"2545074195","distrito":"Madeira","concelho":"São Vicente","x":-17.0110782342892,"y":32.78689019831235},{"id":"21530056367","distrito":"Bragança","concelho":"Mogadouro","x":-6.670024926347384,"y":41.33336679478394},{"id":"9067665098","distrito":"Beja","concelho":"Vidigueira","x":-7.716955965288296,"y":38.16894913656993},{"id":"7528705481","distrito":"Guarda","concelho":"Aguiar da Beira","x":-7.528381637063938,"y":40.781160986979735},{"id":"17606870984","distrito":"Porto","concelho":"Trofa","x":-8.567334630153274,"y":41.311419905540795},{"id":"8516093285","distrito":"Leiria","concelho":"Alvaiázere","x":-8.395411944710833,"y":39.81924849218472},{"id":"5692043082","distrito":"Coimbra","concelho":"Cantanhede","x":-8.63733949372232,"y":40.35496053059787},{"id":"4474867006","distrito":"Aveiro","concelho":"Ovar","x":-8.618444241878453,"y":40.87786861412887},{"id":"11681492967","distrito":"Vila Real","concelho":"Murça","x":-7.440723866379376,"y":41.422396314389566},{"id":"10776288571","distrito":"Aveiro","concelho":"Murtosa","x":-8.670194095901786,"y":40.76026441054732},{"id":"19964892271","distrito":"Portalegre","concelho":"Arronches","x":-7.243330936841122,"y":39.11683252797023},{"id":"59220888","distrito":"Beja","concelho":"Ourique","x":-8.291116747831277,"y":37.639939038670725},{"id":"11151960615","distrito":"Braga","concelho":"Braga","x":-8.423838419185232,"y":41.54423715359449},{"id":"7621443440","distrito":"Aveiro","concelho":"Albergaria-a-Velha","x":-8.494864480134542,"y":40.700000693122476},{"id":"21439856469","distrito":"Coimbra","concelho":"Coimbra","x":-8.446174680231863,"y":40.216153971440846},{"id":"18975720280","distrito":"Évora","concelho":"Évora","x":-7.870227820320791,"y":38.53313641008285},{"id":"16253153385","distrito":"Azores","concelho":"Nordeste","x":-25.21736356204062,"y":37.822600083908036},{"id":"7647306660","distrito":"Aveiro","concelho":"Aveiro","x":-8.621122889042113,"y":40.637186846502935},{"id":"9317975667","distrito":"Madeira","concelho":"Calheta","x":-17.18243406055575,"y":32.7701102098969},{"id":"12101770544","distrito":"Viseu","concelho":"São Pedro do Sul","x":-8.094628335228858,"y":40.81639391830676},{"id":"9889598130","distrito":"Lisboa","concelho":"Lourinhã","x":-9.26925458337971,"y":39.24654004666962},{"id":"13036371479","distrito":"Lisboa","concelho":"Amadora","x":-9.229510477007436,"y":38.75981601782112}];;
const startDate = new Date(Date.UTC(2022, 2, 6));
const today = new Date();
const daysElapsed = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));

const maxGuesses = 6;

const allGuesses = localStorage.getItem('guesses') ? JSON.parse(localStorage.getItem('guesses')) : {};
if (!allGuesses[daysElapsed]) {
    allGuesses[daysElapsed] = [];
}

const storedStats = localStorage.getItem('stats') ? JSON.parse(localStorage.getItem('stats')) : 
    {
        played: 0,
        wins: 0,
        distribution: {
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 0,
            6: 0
        }
    };

export const targetConcelho = readable(concelhos[daysElapsed % concelhos.length]);

export const timeToNext = readable(timeToMidnight(), function start(set) {
	const interval = setInterval(() => {
		set(timeToMidnight());
	}, 1000);

	return function stop() {
		clearInterval(interval);
	};
});

export const guesses = createGuesses(allGuesses[daysElapsed]);

function createGuesses(initialGuesses) {
    const {subscribe, set, update} = writable(initialGuesses);

    return {
        subscribe,
        addGuess: (guess) => {
            update(guesses => {
                const hasCorrectGuess = concelhos[daysElapsed % concelhos.length].id === guess.id;
                
                if (guesses.length === maxGuesses || hasCorrectGuess) {
                    if (!hasCorrectGuess) {
                        stats.update(s => ({
                            ...s,
                            played: s.played + 1,
                        }));
                    } else {
                        stats.update(p => ({
                            ...p,
                            played: p.played + 1,
                            wins: p.wins + (hasCorrectGuess ? 1 : 0),
                            distribution: {
                                ...p.distribution,
                                [guesses.length]: p.distribution[guesses.length] + 1
                            }
                        }));
                    }
                }

                guesses.push(guess);
                return guesses;
            });
        }
    }
}

export const stats = writable(storedStats);

export const hasCorrectGuess = derived(
    [guesses, targetConcelho], 
    ([$guesses, $target]) => !!$guesses.find(g => g.id === $target.id)
);

export const canGuess = derived(
    [guesses, hasCorrectGuess], 
    ([$guesses, $hasCorrectGuess]) => !$hasCorrectGuess && $guesses.length < maxGuesses);

guesses.subscribe(guesses => {
    localStorage.setItem('guesses', JSON.stringify({...allGuesses, [daysElapsed]: guesses}));
});

stats.subscribe(stats => localStorage.setItem('stats', JSON.stringify(stats)));

function timeToMidnight() {
    const now = new Date();
    const tomorrow = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate() + 1));
    return new Date(tomorrow - now);
}